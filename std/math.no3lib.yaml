category: "Math"
lib: "Std"
nodes:
  - title: "Const"
    desc: "Outputs a constant value."
    exec_kind: !InOut
    fields:
      - name: "value"
        type: !Multi [Int, Float]
        value: !Int 0
        kind: !Enter
        variant: !Simple
    inputs:
    outputs:
      - name: "const"
        type: !Inherit fi_value
        variant: !Simple
    impls:
      - lang: "python3"
        code: "{o_const} = {f_value}"

  - title: "Add"
    desc: "Adds A to B."
    exec_kind: !InOut
    fields:
    inputs:
      - name: "A"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
      - name: "B"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
    outputs:
      - name: "result"
        type: !Inherit ti_A
        variant: !Simple
    impls:
      - lang: "python3"
        required: ["panic"]
        type_check: |
          if "{ti_A}" != "{ti_B}":
            panic("{title}#{id}: Type mismatch: {ti_A} vs {ti_B}")
        code: "{o_result} = {i_A} + {i_B}"

  - title: "Subtract"
    desc: "Subtracts B from A."
    exec_kind: !InOut
    fields:
    inputs:
      - name: "A"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
      - name: "B"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
    outputs:
      - name: "result"
        type: !Inherit ti_A
        variant: !Simple
    impls:
      - lang: "python3"
        required: ["panic"]
        type_check: |
          if "{ti_A}" != "{ti_B}":
            panic("{title}#{id}: Type mismatch: {ti_A} vs {ti_B}")
        code: "{o_result} = {i_A} - {i_B}"

  - title: "Multiply"
    desc: "Multiplies A by B."
    exec_kind: !InOut
    fields:
    inputs:
      - name: "A"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
      - name: "B"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
    outputs:
      - name: "result"
        type: !Inherit ti_A
        variant: !Simple
    impls:
      - lang: "python3"
        required: ["panic"]
        type_check: |
          if "{ti_A}" != "{ti_B}":
            panic("{title}#{id}: Type mismatch: {ti_A} vs {ti_B}")
        code: "{o_result} = {i_A} * {i_B}"

  - title: "Divide"
    desc: "Divides A by B."
    exec_kind: !InOut
    fields:
    inputs:
      - name: "A"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
      - name: "B"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
    outputs:
      - name: "result"
        type: !Inherit ti_A
        variant: !Simple
    impls:
      - lang: "python3"
        required: ["panic"]
        type_check: |
          if "{ti_A}" != "{ti_B}":
            panic("{title}#{id}: Type mismatch: {ti_A} vs {ti_B}")
        code: "{o_result} = {i_A} / {i_B}"

  - title: "Power"
    desc: "Takes the Bth power of A"
    exec_kind: !InOut
    fields:
    inputs:
      - name: "A"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
      - name: "B"
        type: !Multi [Int, Float]
        default: !Int 0
        variant: !Simple
    outputs:
      - name: "result"
        type: !Inherit ti_A
        variant: !Simple
    impls:
      - lang: "python3"
        required: ["panic"]
        type_check: |
          if "{ti_A}" != "{ti_B}":
            panic("{title}#{id}: Type mismatch: {ti_A} vs {ti_B}")
        code: "{o_result} = {i_A} ** {i_B}"
